{"version":3,"sources":["main.js"],"names":["q","require","_","utils","driver","getDriver","config","lastAccessibleRoomsUpdate","roomsQueue","usersQueue","loop","resetInterval","startLoopTime","process","hrtime","Date","now","stage","emit","self","setInterval","console","error","queue","resetAll","mainLoopResetInterval","notifyTickStarted","then","getAllUsers","users","addMulti","map","user","_id","toString","whenAllDone","getAllRoomsNames","rooms","commitDbBulk","incrementGameTime","gameTime","log","updateAccessibleRoomsList","updateRoomStatusData","notifyRoomsDone","mainLoopCustomStage","catch","isObject","stack","finally","clearInterval","usedTime","setTimeout","Math","max","mainLoopMinDuration","connect","all","create","exit","data","rejections","getUnhandledReasons","forEach","i","resetUnhandledRejections"],"mappings":"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","file":"../main.js","sourceRoot":"/src"}