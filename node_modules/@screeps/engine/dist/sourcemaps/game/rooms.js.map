{"version":3,"sources":["game/rooms.js"],"names":["_","require","utils","driver","getRuntimeDriver","C","constants","pathfinding","abs","Math","min","max","runtimeData","intents","register","globals","positionsSetCacheCounter","createdFlagNames","createdSpawnNames","privateStore","createdConstructionSites","TerrainConstructor","TerrainConstructorSet","getPathfinder","id","opts","defaults","maxOps","heuristicWeight","key","pfFinders","AStarFinder","diagonalMovement","maxOpsLimit","heuristic","Heuristic","chebyshev","weight","makePathfindingGrid","endNodesKey","rows","Array","obstacleTypes","clone","OBSTACLE_OBJECT_TYPES","ignoreDestructibleStructures","without","ignoreCreeps","y","x","terrainCode","staticTerrainData","TERRAIN_MASK_WALL","TERRAIN_MASK_SWAMP","objectsByRoomKeys","forEach","object","objectsByRoom","contains","type","isPublic","user","_id","structureType","ignore","isArray","Error","i","pos","isObject","isUndefined","screepPrototype","avoid","pfEndNodes","Grid","getPathfindingGrid","gridName","isNumber","positionsSetCache","pfGrid","makePathfindingGrid2","costs","PathFinder","CostMatrix","push","rooms","controller","safeMode","my","set","get","ignoreRoads","getPathfindingGrid2","_findPath2","fromPos","toPos","isEqualTo","serialize","deprecated","undefined","maxRooms","roomName","searchOpts","roomCallback","costMatrix","costCallback","resultMatrix","plainCost","swampCost","ret","search","range","path","length","isNearTo","curX","curY","resultPath","result","dx","dy","direction","getDirection","serializePath","_findClosestByPath2","objects","find","filter","objectOnSquare","obj","goals","map","lastPos","exports","make","_runtimeData","_intents","_register","_globals","array","constructor","prototype","Room","data","wrapFn","gameInfo","gameId","match","games","Object","defineProperty","value","enumerable","energyAvailable","energyCapacityAvailable","survivalInfo","pfDijkstraFinder","DijkstraFinder","pathCache","cache","positionsArray","findKey","every","j","any","parseInt","lookTypeRegisters","creep","byRoom","creeps","energy","resource","source","sources","mineral","minerals","deposit","deposits","structure","structures","flag","flags","constructionSite","constructionSites","tombstone","tombstones","ruin","ruins","nuke","nukes","powerCreep","powerCreeps","lookTypeSpatialRegisters","spatial","customObjectPrototypes","lookConstant","visual","RoomVisual","deserializePath","str","toString","name","toJSON","Memory","getEventLog","raw","roomEventLog","roomEventLogCache","JSON","parse","findCache","FIND_EXIT","FIND_EXIT_TOP","concat","FIND_EXIT_BOTTOM","FIND_EXIT_RIGHT","FIND_EXIT_LEFT","exits","reduce","accum","getPositionAt","_lookSpatialRegister","typeName","outArray","withCoords","item","terrain","typeResult","_lookAreaMixedRegister","top","left","bottom","right","withType","asArray","typeRegister","keys","checkInside","lookAt","firstArg","secondArg","fetchXYArguments","LOOK_CREEPS","LOOK_ENERGY","LOOK_RESOURCES","LOOK_SOURCES","LOOK_MINERALS","LOOK_DEPOSITS","LOOK_STRUCTURES","LOOK_FLAGS","LOOK_CONSTRUCTION_SITES","LOOK_TERRAIN","LOOK_NUKES","LOOK_TOMBSTONES","LOOK_RUINS","LOOK_POWER_CREEPS","lookForAt","ERR_INVALID_ARGS","lookAtArea","lookForAtArea","findPath","_useNewPathFinder","fromX","fromY","cacheKeySuffix","grid","toX","toY","cacheKey","cloneDeep","finder","setWalkableAt","splice","step","lastStep","createFlag","color","secondaryColor","size","Game","FLAGS_LIMIT","ERR_FULL","COLOR_WHITE","COLORS_ALL","cnt","indexOf","ERR_NAME_EXISTS","Flag","pushByName","createConstructionSite","isString","CONSTRUCTION_COST","spawns","level","ERR_NOT_OWNER","reservation","checkControllerAvailability","ERR_RCL_NOT_ENOUGH","checkConstructionSite","ERR_INVALID_TARGET","userObjects","MAX_CONSTRUCTION_SITES","intent","OK","getEndNodes","findExitTo","room","findExit","getTerrain","Terrain","circle","style","console","addVisual","t","s","line","x1","y1","x2","y2","rect","w","h","poly","points","some","text","getSize","getVisualSize","clear","clearVisual","export","getVisual","import","getRawBuffer","destinationArray","call","makePos","kMaxWorldSize","kMaxWorldSize2","roomNames","getRoomNameFromXY","slowFn","xx","yy","xy","roomNameToXY","writable","defineProperties","__packedPos","val","assign","inRangeTo","thirdArg","getDirectionTo","thisRoomX","thisRoomY","thatRoomX","thatRoomY","findPathTo","exitDir","exit","findClosestByPath","isNear","endNodes","algorithm","minH","sumH","distance","lastStepPos","findInRange","findClosestByRange","closest","minRange","Infinity","getRangeTo","look","lookFor","RoomObject","effects","power","effect","ticksRemaining","endTime","time"],"mappings":"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","file":"../../game/rooms.js","sourceRoot":"/src"}