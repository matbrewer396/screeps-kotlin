{"version":3,"sources":["processor/intents/towers/heal.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","intent","roomObjects","bulk","eventLog","gameTime","type","store","target","id","spawning","energy","TOWER_ENERGY_COST","range","Math","max","abs","x","y","amount","TOWER_POWER_HEAL","TOWER_OPTIMAL_RANGE","TOWER_FALLOFF_RANGE","TOWER_FALLOFF","PWR_OPERATE_TOWER","PWR_DISRUPT_TOWER","forEach","power","effect","find","effects","endTime","POWER_INFO","level","floor","_healToApply","update","actionLog","heal","healed","push","event","EVENT_HEAL","objectId","_id","data","targetId","healType","EVENT_HEAL_TYPE_RANGED"],"mappings":";;AAAA,IAAIA,IAAIC,QAAQ,QAAR,CAAR;AAAA,IACIC,QAASD,QAAQ,gBAAR,CADb;AAAA,IAEIE,SAASD,MAAME,SAAN,EAFb;AAAA,IAGIC,IAAIF,OAAOG,SAHf;;AAKAC,OAAOC,OAAP,GAAiB,UAASC,MAAT,EAAiBC,MAAjB,EAAyB,EAACC,WAAD,EAAcC,IAAd,EAAoBC,QAApB,EAA8BC,QAA9B,EAAzB,EAAkE;;AAE/E,QAAG,CAACL,MAAD,IAAWA,OAAOM,IAAP,IAAe,OAA1B,IAAqC,CAACN,OAAOO,KAAhD,EAAuD;AACnD;AACH;;AAED,QAAIC,SAASN,YAAYD,OAAOQ,EAAnB,CAAb;AACA,QAAG,CAACD,MAAD,IAAWA,OAAOF,IAAP,IAAe,OAAf,IAA0BE,OAAOF,IAAP,KAAgB,YAAxD,EAAsE;AAClE;AACH;AACD,QAAGE,OAAOE,QAAV,EAAoB;AAChB;AACH;AACD,QAAGV,OAAOO,KAAP,CAAaI,MAAb,GAAsBf,EAAEgB,iBAA3B,EAA8C;AAC1C;AACH;;AAED,QAAIC,QAAQC,KAAKC,GAAL,CAASD,KAAKE,GAAL,CAASR,OAAOS,CAAP,GAAWjB,OAAOiB,CAA3B,CAAT,EAAwCH,KAAKE,GAAL,CAASR,OAAOU,CAAP,GAAWlB,OAAOkB,CAA3B,CAAxC,CAAZ;AACA,QAAIC,SAASvB,EAAEwB,gBAAf;AACA,QAAGP,QAAQjB,EAAEyB,mBAAb,EAAkC;AAC9B,YAAGR,QAAQjB,EAAE0B,mBAAb,EAAkC;AAC9BT,oBAAQjB,EAAE0B,mBAAV;AACH;AACDH,kBAAUA,SAASvB,EAAE2B,aAAX,IAA4BV,QAAQjB,EAAEyB,mBAAtC,KAA8DzB,EAAE0B,mBAAF,GAAwB1B,EAAEyB,mBAAxF,CAAV;AACH;AACD,KAACzB,EAAE4B,iBAAH,EAAsB5B,EAAE6B,iBAAxB,EAA2CC,OAA3C,CAAmDC,SAAS;AACxD,YAAIC,SAASrC,EAAEsC,IAAF,CAAO7B,OAAO8B,OAAd,EAAuB,EAACH,KAAD,EAAvB,CAAb;AACA,YAAGC,UAAUA,OAAOG,OAAP,GAAiB1B,QAA9B,EAAwC;AACpCc,sBAAUvB,EAAEoC,UAAF,CAAaL,KAAb,EAAoBC,MAApB,CAA2BA,OAAOK,KAAP,GAAa,CAAxC,CAAV;AACH;AACJ,KALD;AAMAd,aAASL,KAAKoB,KAAL,CAAWf,MAAX,CAAT;;AAEA,QAAG,CAACA,MAAJ,EAAY;AACR;AACH;;AAEDX,WAAO2B,YAAP,GAAsB,CAAC3B,OAAO2B,YAAP,IAAuB,CAAxB,IAA6BhB,MAAnD;;AAEAnB,WAAOO,KAAP,CAAaI,MAAb,IAAuBf,EAAEgB,iBAAzB;AACAT,SAAKiC,MAAL,CAAYpC,MAAZ,EAAoB,EAACO,OAAM,EAACI,QAAQX,OAAOO,KAAP,CAAaI,MAAtB,EAAP,EAApB;;AAEAX,WAAOqC,SAAP,CAAiBC,IAAjB,GAAwB,EAACrB,GAAGT,OAAOS,CAAX,EAAcC,GAAGV,OAAOU,CAAxB,EAAxB;AACAV,WAAO6B,SAAP,CAAiBE,MAAjB,GAA0B,EAACtB,GAAGjB,OAAOiB,CAAX,EAAcC,GAAGlB,OAAOkB,CAAxB,EAA1B;;AAEAd,aAASoC,IAAT,CAAc,EAACC,OAAO7C,EAAE8C,UAAV,EAAsBC,UAAU3C,OAAO4C,GAAvC,EAA4CC,MAAM,EAACC,UAAUtC,OAAOoC,GAAlB,EAAuBzB,QAAQA,MAA/B,EAAuC4B,UAAUnD,EAAEoD,sBAAnD,EAAlD,EAAd;AAEH,CA/CD","file":"../../../../processor/intents/towers/heal.js","sourceRoot":"/src"}