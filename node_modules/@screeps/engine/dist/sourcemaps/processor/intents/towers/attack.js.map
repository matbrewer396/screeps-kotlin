{"version":3,"sources":["processor/intents/towers/attack.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","intent","scope","roomObjects","bulk","roomController","gameTime","type","store","target","id","spawning","hits","energy","TOWER_ENERGY_COST","rampart","find","x","y","range","Math","max","abs","amount","TOWER_POWER_ATTACK","TOWER_OPTIMAL_RANGE","TOWER_FALLOFF_RANGE","TOWER_FALLOFF","PWR_OPERATE_TOWER","PWR_DISRUPT_TOWER","forEach","power","effect","effects","endTime","POWER_INFO","level","floor","EVENT_ATTACK_TYPE_RANGED","update","actionLog","attack","attacked","notifyWhenAttacked","sendAttackingNotification"],"mappings":"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","file":"../../../../processor/intents/towers/attack.js","sourceRoot":"/src"}