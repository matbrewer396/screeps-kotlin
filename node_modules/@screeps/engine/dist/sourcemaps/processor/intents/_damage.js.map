{"version":3,"sources":["processor/intents/_damage.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","target","damage","attackType","scope","roomObjects","bulk","roomController","gameTime","roomInfo","eventLog","_id","hits","attackBackPower","type","EVENT_ATTACK_TYPE_MELEE","any","x","y","calcBodyEffectiveness","body","ATTACK","ATTACK_POWER","_damageToApply","EVENT_ATTACK_TYPE_NUKE","effect","find","effects","e","power","PWR_FORTIFY","EFFECT_INVULNERABILITY","endTime","POWER_BANK_HIT_BACK","user","safeMode","decayTime","push","event","EVENT_OBJECT_DESTROYED","objectId","data","update","actionLog","EVENT_ATTACK_TYPE_DISMANTLE","attack","EVENT_ATTACK_TYPE_RANGED","rangedAttack","attacked","notifyWhenAttacked","sendAttackingNotification","lastPvpTime","EVENT_ATTACK","targetId","EVENT_ATTACK_TYPE_HIT_BACK"],"mappings":"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","file":"../../../processor/intents/_damage.js","sourceRoot":"/src"}