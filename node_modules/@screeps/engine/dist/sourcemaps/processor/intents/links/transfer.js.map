{"version":3,"sources":["processor/intents/links/transfer.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","intent","roomObjects","bulk","roomController","eventLog","type","store","energy","amount","target","id","targetTotal","cooldown","checkStructureAgainstController","storeCapacityResource","Math","ceil","LINK_LOSS_RATIO","LINK_COOLDOWN","max","abs","x","y","actionLog","transferEnergy","update","push","event","EVENT_TRANSFER","objectId","_id","data","targetId","resourceType","RESOURCE_ENERGY"],"mappings":";;AAAA,IAAIA,IAAIC,QAAQ,QAAR,CAAR;AAAA,IACIC,QAASD,QAAQ,gBAAR,CADb;AAAA,IAEIE,SAASD,MAAME,SAAN,EAFb;AAAA,IAGIC,IAAIF,OAAOG,SAHf;;AAKAC,OAAOC,OAAP,GAAiB,UAASC,MAAT,EAAiBC,MAAjB,EAAyB,EAACC,WAAD,EAAcC,IAAd,EAAoBC,cAApB,EAAoCC,QAApC,EAAzB,EAAwE;;AAErF,QAAG,CAACL,MAAD,IAAWA,OAAOM,IAAP,IAAe,MAA7B,EAAqC;AACjC;AACH;;AAED,QAAG,CAACN,OAAOO,KAAR,IAAiBP,OAAOO,KAAP,CAAaC,MAAb,GAAsBP,OAAOQ,MAA9C,IAAwDR,OAAOQ,MAAP,GAAgB,CAA3E,EAA8E;AAC1E;AACH;;AAED,QAAIC,SAASR,YAAYD,OAAOU,EAAnB,CAAb;AACA,QAAG,CAACD,MAAJ,EAAY;AACR;AACH;;AAED,QAAGA,OAAOJ,IAAP,IAAe,MAAlB,EAA0B;AACtB;AACH;AACD,QAAIG,SAASR,OAAOQ,MAApB;AACA,QAAIG,WAAJ;;AAEA,QAAGZ,OAAOa,QAAP,GAAkB,CAArB,EAAwB;AACpB;AACH;AACD,QAAG,CAACpB,MAAMqB,+BAAN,CAAsCd,MAAtC,EAA8CE,WAA9C,EAA2DE,cAA3D,CAAJ,EAAgF;AAC5E;AACH;AACDQ,kBAAcF,OAAOH,KAAP,CAAaC,MAA3B;;AAEA,QAAG,CAACE,OAAOK,qBAAR,IAAiC,CAACL,OAAOK,qBAAP,CAA6BP,MAA/D,IAAyEI,eAAeF,OAAOK,qBAAP,CAA6BP,MAAxH,EAAgI;AAC5H;AACH;;AAED,QAAGI,cAAcH,MAAd,GAAuBC,OAAOK,qBAAP,CAA6BP,MAAvD,EAA+D;AAC3DC,iBAASC,OAAOK,qBAAP,CAA6BP,MAA7B,GAAsCI,WAA/C;AACH;AACDF,WAAOH,KAAP,CAAaC,MAAb,IAAuBC,MAAvB;;AAEAT,WAAOO,KAAP,CAAaC,MAAb,IAAuBC,MAAvB;;AAEAC,WAAOH,KAAP,CAAaC,MAAb,IAAuBQ,KAAKC,IAAL,CAAUR,SAASb,EAAEsB,eAArB,CAAvB;AACAlB,WAAOa,QAAP,IAAmBjB,EAAEuB,aAAF,GAAkBH,KAAKI,GAAL,CAASJ,KAAKK,GAAL,CAASX,OAAOY,CAAP,GAAWtB,OAAOsB,CAA3B,CAAT,EAAwCN,KAAKK,GAAL,CAASX,OAAOa,CAAP,GAAWvB,OAAOuB,CAA3B,CAAxC,CAArC;AACAvB,WAAOwB,SAAP,CAAiBC,cAAjB,GAAkC,EAACH,GAAGZ,OAAOY,CAAX,EAAcC,GAAGb,OAAOa,CAAxB,EAAlC;AACApB,SAAKuB,MAAL,CAAYhB,MAAZ,EAAoB,EAACH,OAAM,EAACC,QAAQE,OAAOH,KAAP,CAAaC,MAAtB,EAAP,EAApB;;AAEAL,SAAKuB,MAAL,CAAY1B,MAAZ,EAAoB,EAACO,OAAM,EAACC,QAAQR,OAAOO,KAAP,CAAaC,MAAtB,EAAP,EAAsCK,UAAUb,OAAOa,QAAvD,EAAiEW,WAAWxB,OAAOwB,SAAnF,EAApB;;AAEAnB,aAASsB,IAAT,CAAc,EAACC,OAAOhC,EAAEiC,cAAV,EAA0BC,UAAU9B,OAAO+B,GAA3C,EAAgDC,MAAM,EAACC,UAAUvB,OAAOqB,GAAlB,EAAuBG,cAActC,EAAEuC,eAAvC,EAAwD1B,MAAxD,EAAtD,EAAd;AACH,CAhDD","file":"../../../../processor/intents/links/transfer.js","sourceRoot":"/src"}