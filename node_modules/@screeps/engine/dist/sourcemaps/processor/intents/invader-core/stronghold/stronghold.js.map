{"version":3,"sources":["processor/intents/invader-core/stronghold/stronghold.js"],"names":["_","require","utils","driver","getDriver","C","constants","strongholds","defence","creeps","towerRefillChance","range","a","b","isUndefined","x","y","room","Infinity","Math","max","abs","deployStronghold","context","scope","core","ramparts","bulk","gameTime","roomObjects","deployTime","duration","round","STRONGHOLD_DECAY_TICKS","random","decayTime","effects","push","effect","EFFECT_COLLAPSE_TIMER","power","endTime","update","hits","INVADER_CORE_HITS","hitsMax","forEach","rampart","remove","_id","template","templates","templateName","objectOptions","STRUCTURE_RAMPART","STRONGHOLD_RAMPART_HITS","rewardLevel","RAMPART_HITS_MAX","hitsTarget","level","nextDecayTime","STRUCTURE_TOWER","TOWER_HITS","store","energy","TOWER_CAPACITY","storeCapacityResource","actionLog","attack","heal","repair","STRUCTURE_CONTAINER","notifyWhenAttacked","CONTAINER_HITS","storeCapacity","STRUCTURE_ROAD","ROAD_HITS","createdStructureCounter","structures","i","dx","dy","o","strongholdId","type","undefined","progress","floor","CONSTRUCTION_COST","STRUCTURE_INVADER_CORE","s","Object","assign","user","calcReward","containerRewards","containerAmounts","insert","handleController","reserveController","intents","roomController","downgradeTime","INVADER_CORE_CONTROLLER_DOWNGRADE","set","id","reservation","refillTowers","towers","underchargedTowers","filter","t","TOWER_ENERGY_COST","some","towerToCharge","min","amount","resourceType","RESOURCE_ENERGY","refillCreeps","defenders","underchargedCreeps","c","creep","towersMaintenance","damagedDefenders","damagedRoads","length","protectedCreeps","d","first","tower","pull","protectedRoads","r","road","focusClosest","hostiles","target","dist","meleesNear","body","ATTACK","melee","rangersInRange","RANGED_ATTACK","focusMax","activeTowers","damage","sum","TOWER_POWER_ATTACK","TOWER_OPTIMAL_RANGE","TOWER_FALLOFF_RANGE","TOWER_FALLOFF","PWR_OPERATE_TOWER","PWR_DISRUPT_TOWER","find","POWER_INFO","defender","calcBodyEffectiveness","RANGED_ATTACK_POWER","ATTACK_POWER","maintainCreep","name","setup","behavior","spawning","_spawning","boosts","maintainPopulation","population","bodies","behaviors","antinuke","nukes","baseLevel","n","NUKE_DAMAGE","assignDefenders","rangerSpots","meleeSpots","h","unique","without","rangers","melees","toString","spots","distribute","module","exports","populationDeck","Array","fill","shuffle","take","value"],"mappings":"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","file":"../../../../../processor/intents/invader-core/stronghold/stronghold.js","sourceRoot":"/src"}