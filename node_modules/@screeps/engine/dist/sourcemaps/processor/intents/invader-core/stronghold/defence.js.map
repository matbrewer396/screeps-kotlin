{"version":3,"sources":["processor/intents/invader-core/stronghold/defence.js"],"names":["_","require","utils","driver","getDriver","C","constants","fakeRuntime","defence","exports","createSafeMatrixCallback","context","hostiles","ramparts","roomObjects","some","safeMatrixCallback","room","matrix","CostMatrix","i","j","set","Infinity","rampart","x","y","forEach","object","type","includes","OBSTACLE_OBJECT_TYPES","distribute","positions","agents","length","slice","result","weights","map","p","pos","weight","creep","shift","place","max","pull","w","Math","size","dist"],"mappings":";;AAAA,MAAMA,IAAIC,QAAQ,QAAR,CAAV;AAAA,MACIC,QAAQD,QAAQ,mBAAR,CADZ;AAAA,MAEIE,SAASD,MAAME,SAAN,EAFb;AAAA,MAGIC,IAAIF,OAAOG,SAHf;AAAA,MAIIC,cAAcN,QAAQ,8BAAR,CAJlB;AAAA,MAKIO,UAAUP,QAAQ,WAAR,CALd;;AAOAQ,QAAQC,wBAAR,GAAmC,SAASA,wBAAT,CAAkCC,OAAlC,EAA2C;AAAA,UAClEC,QADkE,GAC9BD,OAD8B,CAClEC,QADkE;AAAA,UACxDC,QADwD,GAC9BF,OAD8B,CACxDE,QADwD;AAAA,UAC9CC,WAD8C,GAC9BH,OAD8B,CAC9CG,WAD8C;;;AAG1E,QAAG,CAACd,EAAEe,IAAF,CAAOH,QAAP,CAAJ,EAAsB;AAClB;AACH;;AAED,UAAMI,qBAAqB,SAASA,kBAAT,CAA4BC,IAA5B,EAAkC;AACzD,cAAMC,SAAS,IAAIX,YAAYY,UAAhB,EAAf;AACA,aAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,EAAnB,EAAuBA,GAAvB,EACI,KAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,EAAnB,EAAuBA,GAAvB,EACIH,OAAOI,GAAP,CAAWF,CAAX,EAAcC,CAAd,EAAiBE,QAAjB;;AAER,aAAI,IAAIC,OAAR,IAAmBX,QAAnB,EAA6B;AACzBK,mBAAOI,GAAP,CAAWE,QAAQC,CAAnB,EAAsBD,QAAQE,CAA9B,EAAiC,CAAjC;AACH;;AAED1B,UAAE2B,OAAF,CAAUb,WAAV,EAAuBc,UAAU;AAC7B,gBAAGA,OAAOC,IAAP,IAAe,OAAf,IAA0B7B,EAAE8B,QAAF,CAAWzB,EAAE0B,qBAAb,EAAoCH,OAAOC,IAA3C,CAA7B,EAA+E;AAC3EX,uBAAOI,GAAP,CAAWM,OAAOH,CAAlB,EAAqBG,OAAOF,CAA5B,EAA+BH,QAA/B;AACH;AACJ,SAJD;;AAMA,eAAOL,MAAP;AACH,KAjBD;;AAmBA,WAAOF,kBAAP;AACH,CA3BD;;AA6BAP,QAAQuB,UAAR,GAAqB,UAASC,SAAT,EAAoBC,MAApB,EAA4B;AAC7C,QAAG,CAAClC,EAAEe,IAAF,CAAOmB,MAAP,CAAJ,EAAoB;AAChB,eAAO,EAAP;AACH;AACD,QAAGA,OAAOC,MAAP,GAAgBF,UAAUE,MAA7B,EAAqC;AACjCD,iBAASA,OAAOE,KAAP,CAAa,CAAb,EAAgBH,UAAUE,MAA1B,CAAT;AACH;;AAED,UAAME,SAAS,EAAf;AAAA,UAAmBC,UAAUtC,EAAEuC,GAAF,CAAMN,SAAN,EAAiBO,KAAK;AAAE,eAAO,EAACC,KAAKD,CAAN,EAASE,QAAQ,GAAjB,EAAP;AAA6B,KAArD,CAA7B;AACA,WAAM1C,EAAEe,IAAF,CAAOmB,MAAP,CAAN,EAAsB;AAClB,cAAMS,QAAQT,OAAOU,KAAP,EAAd;AACA,cAAMC,QAAQ7C,EAAE8C,GAAF,CAAMR,OAAN,EAAe,QAAf,CAAd;AACAtC,UAAE+C,IAAF,CAAOT,OAAP,EAAgBO,KAAhB;AACAR,eAAO,KAAGQ,MAAMJ,GAAN,CAAUhB,CAAb,GAAeoB,MAAMJ,GAAN,CAAUf,CAAhC,IAAqCiB,KAArC;AACA3C,UAAE2B,OAAF,CAAUW,OAAV,EAAmBU,KAAK;AACpBA,cAAEN,MAAF,IAAYO,KAAKH,GAAL,CAAS,CAAT,EAAY9C,EAAEkD,IAAF,CAAOZ,OAAP,IAAgBpC,MAAMiD,IAAN,CAAWH,EAAEP,GAAb,EAAkBI,MAAMJ,GAAxB,CAA5B,CAAZ;AACH,SAFD;AAGH;AACD,WAAOJ,MAAP;AACH,CAnBD","file":"../../../../../processor/intents/invader-core/stronghold/defence.js","sourceRoot":"/src"}