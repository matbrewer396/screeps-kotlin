{"version":3,"sources":["processor/intents/invader-core/upgradeController.js"],"names":["_","require","utils","driver","getDriver","C","constants","strongholds","module","exports","object","intent","scope","roomObjects","bulk","gameTime","eventLog","type","target","id","level","user","upgradeBlocked","effect","find","effects","EFFECT_INVULNERABILITY","endTime","INVADER_CORE_CONTROLLER_DOWNGRADE","duration","upgradePower","downgradeTime","_upgraded","actionLog","upgradeController","x","y","update","push","event","EVENT_UPGRADE_CONTROLLER","objectId","_id","data","amount","energySpent"],"mappings":";;AAAA,MAAMA,IAAIC,QAAQ,QAAR,CAAV;AAAA,MACIC,QAASD,QAAQ,gBAAR,CADb;AAAA,MAEIE,SAASD,MAAME,SAAN,EAFb;AAAA,MAGIC,IAAIF,OAAOG,SAHf;AAAA,MAIIC,cAAcJ,OAAOI,WAJzB;;AAOAC,OAAOC,OAAP,GAAiB,UAASC,MAAT,EAAiBC,MAAjB,EAAyBC,KAAzB,EAAgC;AAAA,UACrCC,WADqC,GACKD,KADL,CACrCC,WADqC;AAAA,UACxBC,IADwB,GACKF,KADL,CACxBE,IADwB;AAAA,UAClBC,QADkB,GACKH,KADL,CAClBG,QADkB;AAAA,UACRC,QADQ,GACKJ,KADL,CACRI,QADQ;;;AAG7C,QAAGN,OAAOO,IAAP,IAAe,aAAlB,EAAiC;AAC7B;AACH;;AAED,UAAMC,SAASL,YAAYF,OAAOQ,EAAnB,CAAf;AACA,QAAG,CAACD,MAAD,IAAWA,OAAOD,IAAP,IAAe,YAA7B,EAA2C;AACvC;AACH;;AAED,QAAGC,OAAOE,KAAP,IAAgB,CAAhB,IAAqBF,OAAOG,IAAP,IAAeX,OAAOW,IAA9C,EAAoD;AAChD;AACH;AACD,QAAGH,OAAOI,cAAP,IAAyBJ,OAAOI,cAAP,GAAwBP,QAApD,EAA8D;AAC1D;AACH;;AAED,UAAMQ,SAASvB,EAAEwB,IAAF,CAAON,OAAOO,OAAd,EAAuB,EAACF,QAAQlB,EAAEqB,sBAAX,EAAvB,CAAf;AACA,QAAGH,MAAH,EAAW;AACPA,eAAOI,OAAP,GAAiBZ,WAAWV,EAAEuB,iCAA9B;AACH,KAFD,MAEO;AACHV,eAAOO,OAAP,GAAiB,CAAC;AACdF,oBAAQlB,EAAEqB,sBADI;AAEdC,qBAASZ,WAAWV,EAAEuB,iCAFR;AAGdC,sBAAUxB,EAAEuB;AAHE,SAAD,CAAjB;AAKH;;AAED,UAAME,eAAe,CAArB;AACAZ,WAAOa,aAAP,GAAuBhB,WAAWV,EAAEuB,iCAApC;;AAEAV,WAAOc,SAAP,IAAoBF,YAApB;;AAEApB,WAAOuB,SAAP,CAAiBC,iBAAjB,GAAqC,EAACC,GAAGjB,OAAOiB,CAAX,EAAcC,GAAGlB,OAAOkB,CAAxB,EAArC;;AAEA,UAAMX,UAAUP,OAAOO,OAAvB;AACAX,SAAKuB,MAAL,CAAYnB,MAAZ,EAAoB,EAAEO,SAAS,IAAX,EAApB;AACAX,SAAKuB,MAAL,CAAYnB,MAAZ,EAAoB;AAChBa,uBAAeb,OAAOa,aADN;AAEhBN;AAFgB,KAApB;;AAKAT,aAASsB,IAAT,CAAc,EAACC,OAAOlC,EAAEmC,wBAAV,EAAoCC,UAAU/B,OAAOgC,GAArD,EAA0DC,MAAM;AACtEC,oBAAQd,YAD8D,EAChDe,aAAa;AADmC,SAAhE,EAAd;AAGH,CA/CD","file":"../../../../processor/intents/invader-core/upgradeController.js","sourceRoot":"/src"}