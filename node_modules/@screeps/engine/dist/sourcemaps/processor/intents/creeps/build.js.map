{"version":3,"sources":["processor/intents/creeps/build.js"],"names":["_","require","config","utils","driver","getDriver","C","constants","createdStructureCounter","module","exports","object","intent","roomObjects","roomTerrain","bulk","roomController","stats","gameTime","eventLog","type","spawning","store","energy","target","id","CONSTRUCTION_COST","structureType","Math","abs","x","y","objectsInTile","creepsInTile","myCreepsInTile","structure","forEach","obj","push","user","contains","OBSTACLE_OBJECT_TYPES","any","i","mySafeMode","safeMode","blockingCreeps","checkTerrain","TERRAIN_MASK_WALL","buildPower","filter","body","hits","_oldHits","WORK","length","BUILD_POWER","buildRemaining","progressTotal","progress","buildEffect","min","boostedParts","map","boost","BOOSTS","build","sort","a","b","slice","boostedEffect","floor","sum","inc","actionLog","update","incomplete","event","EVENT_BUILD","objectId","_id","data","targetId","amount","remove","newObject","room","notifyWhenAttacked","extend","name","storeCapacityResource","SPAWN_ENERGY_CAPACITY","SPAWN_HITS","hitsMax","EXTENSION_HITS","LINK_CAPACITY","cooldown","LINK_HITS","LINK_HITS_MAX","storeCapacity","STORAGE_CAPACITY","STORAGE_HITS","RAMPART_HITS_MAX","level","RAMPART_HITS","nextDecayTime","RAMPART_DECAY_TIME","ROAD_HITS","TERRAIN_MASK_SWAMP","CONSTRUCTION_COST_ROAD_SWAMP_RATIO","CONSTRUCTION_COST_ROAD_WALL_RATIO","ROAD_DECAY_TIME","WALL_HITS","WALL_HITS_MAX","TOWER_CAPACITY","TOWER_HITS","OBSERVER_HITS","EXTRACTOR_HITS","LAB_HITS","mineralAmount","LAB_ENERGY_CAPACITY","LAB_MINERAL_CAPACITY","POWER_SPAWN_ENERGY_CAPACITY","power","POWER_SPAWN_POWER_CAPACITY","POWER_SPAWN_HITS","TERMINAL_CAPACITY","TERMINAL_HITS","CONTAINER_CAPACITY","CONTAINER_HITS","CONTAINER_DECAY_TIME","ptr","NUKER_ENERGY_CAPACITY","G","NUKER_GHODIUM_CAPACITY","NUKER_HITS","cooldownTime","NUKER_COOLDOWN","FACTORY_CAPACITY","FACTORY_HITS","insert"],"mappings":"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","file":"../../../../processor/intents/creeps/build.js","sourceRoot":"/src"}