{"version":3,"sources":["processor/intents/creeps/harvest.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","intent","scope","roomObjects","roomTerrain","bulk","roomController","stats","eventLog","gameTime","type","spawning","target","id","Math","abs","x","y","energy","user","reservation","harvestAmount","calcBodyEffectiveness","body","WORK","HARVEST_POWER","amount","min","store","invaderHarvested","update","sum","calcResources","storeCapacity","resourceType","actionLog","harvest","inc","push","event","EVENT_HARVEST","objectId","_id","data","targetId","mineralAmount","extractor","find","i","STRUCTURE_EXTRACTOR","checkStructureAgainstController","cooldown","HARVEST_MINERAL_POWER","mineralType","_cooldown","EXTRACTOR_COOLDOWN","cooldownTime","HARVEST_DEPOSIT_POWER","depositType","ceil","DEPOSIT_EXHAUST_MULTIPLY","pow","harvested","DEPOSIT_EXHAUST_POW","decayTime","DEPOSIT_DECAY_TIME"],"mappings":"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","file":"../../../../processor/intents/creeps/harvest.js","sourceRoot":"/src"}