{"version":3,"sources":["processor/intents/creeps/_die.js"],"names":["_","require","utils","driver","getDriver","C","constants","module","exports","object","dropRate","violentDeath","roomObjects","bulk","stats","gameTime","eventLog","attackType","undefined","CREEP_CORPSE_RATE","remove","_id","decayTime","body","length","TOMBSTONE_DECAY_PER_PART","tombstoneDecay","EVENT_ATTACK_TYPE_NUKE","tombstone","type","room","x","y","user","deathTime","creepId","creepName","name","creepTicksToLive","ageTime","creepBody","map","b","creepSaying","actionLog","say","isPublic","message","store","container","find","userSummoned","strongholdId","lifeTime","any","CLAIM","CREEP_CLAIM_LIFE_TIME","CREEP_LIFE_TIME","lifeRate","_ticksToLive","bodyResources","energy","forEach","i","boost","LAB_BOOST_MINERAL","LAB_BOOST_ENERGY","Math","min","CREEP_PART_MAX_ENERGY","BODYPART_COST","amount","resourceType","floor","hits","targetTotal","calcResources","toContainerAmount","storeCapacity","update","insert","push","event","EVENT_OBJECT_DESTROYED","objectId","data","inc"],"mappings":"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","file":"../../../../processor/intents/creeps/_die.js","sourceRoot":"/src"}