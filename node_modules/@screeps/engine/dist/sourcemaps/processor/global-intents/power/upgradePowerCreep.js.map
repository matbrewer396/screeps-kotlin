{"version":3,"sources":["processor/global-intents/power/upgradePowerCreep.js"],"names":["q","require","_","utils","driver","getDriver","C","constants","module","exports","intent","user","roomObjectsByType","userPowerCreeps","gameTime","bulkObjects","bulkUsersPowerCreeps","thisUserPowerCreeps","filter","i","_id","powerLevel","Math","floor","pow","power","POWER_LEVEL_MULTIPLY","POWER_LEVEL_POW","used","length","sum","_usedPowerLevels","powerCreep","find","id","level","POWER_CREEP_MAX_LEVEL","powerInfo","POWER_INFO","className","powers","storeCapacity","hitsMax","roomPowerCreep","update"],"mappings":";;AAAA,IAAIA,IAAIC,QAAQ,GAAR,CAAR;AAAA,IACIC,IAAID,QAAQ,QAAR,CADR;AAAA,IAEIE,QAAQF,QAAQ,gBAAR,CAFZ;AAAA,IAGIG,SAASD,MAAME,SAAN,EAHb;AAAA,IAIIC,IAAIF,OAAOG,SAJf;;AAMAC,OAAOC,OAAP,GAAiB,UAASC,MAAT,EAAiBC,IAAjB,EAAuB,EAACC,iBAAD,EAAoBC,eAApB,EAAqCC,QAArC,EAA+CC,WAA/C,EAA4DC,oBAA5D,EAAvB,EAA0G;;AAEvH,QAAIC,sBAAsBf,EAAEgB,MAAF,CAASL,eAAT,EAA0BM,KAAKA,EAAER,IAAF,IAAUA,KAAKS,GAA9C,CAA1B;;AAEA,QAAIC,aAAaC,KAAKC,KAAL,CAAWD,KAAKE,GAAL,CAAS,CAACb,KAAKc,KAAL,IAAc,CAAf,IAAoBnB,EAAEoB,oBAA/B,EAAqD,IAAIpB,EAAEqB,eAA3D,CAAX,CAAjB;AACA,QAAIC,OAAOX,oBAAoBY,MAApB,GAA6B3B,EAAE4B,GAAF,CAAMb,mBAAN,EAA2B,OAA3B,CAA7B,IAAoEN,KAAKoB,gBAAL,IAAuB,CAA3F,CAAX;AACA,QAAGH,QAAQP,UAAX,EAAuB;AACnB;AACH;;AAED,QAAIW,aAAa9B,EAAE+B,IAAF,CAAOhB,mBAAP,EAA4BE,KAAKA,EAAEC,GAAF,IAASV,OAAOwB,EAAjD,CAAjB;AACA,QAAI,CAACF,UAAL,EAAiB;AACb;AACH;;AAED,QAAGA,WAAWG,KAAX,IAAoB7B,EAAE8B,qBAAzB,EAAgD;AAC5C;AACH;AACD,QAAIC,YAAY/B,EAAEgC,UAAF,CAAa5B,OAAOe,KAApB,CAAhB;AACA,QAAG,CAACY,SAAJ,EAAe;AACX;AACH;AACD,QAAGA,UAAUE,SAAV,KAAwBP,WAAWO,SAAtC,EAAiD;AAC7C;AACH;;AAED,QAAIJ,QAAQH,WAAWG,KAAvB;AACA,QAAG,CAACH,WAAWQ,MAAX,CAAkB9B,OAAOe,KAAzB,CAAJ,EAAqC;AACjCO,mBAAWQ,MAAX,CAAkB9B,OAAOe,KAAzB,IAAkC,EAACU,OAAO,CAAR,EAAlC;AACH;AACD,QAAGH,WAAWQ,MAAX,CAAkB9B,OAAOe,KAAzB,EAAgCU,KAAhC,IAAyC,CAA5C,EAA+C;AAC3C;AACH;;AAED,QAAGA,QAAQE,UAAUF,KAAV,CAAgBH,WAAWQ,MAAX,CAAkB9B,OAAOe,KAAzB,EAAgCU,KAAhD,CAAX,EAAmE;AAC/D;AACH;;AAEDA;AACA,QAAIM,gBAAgBT,WAAWS,aAAX,GAA2B,GAA/C;AACA,QAAIC,UAAUV,WAAWU,OAAX,GAAqB,IAAnC;AACAV,eAAWQ,MAAX,CAAkB9B,OAAOe,KAAzB,EAAgCU,KAAhC;;AAEA,QAAIQ,iBAAiBzC,EAAE+B,IAAF,CAAOrB,kBAAkBoB,UAAzB,EAAqCb,KAAKA,EAAEC,GAAF,IAASV,OAAOwB,EAA1D,CAArB;AACA,QAAGS,cAAH,EAAmB;AACf5B,oBAAY6B,MAAZ,CAAmBD,cAAnB,EAAmC;AAC/BR,iBAD+B;AAE/BO,mBAF+B;AAG/BD,yBAH+B;AAI/BD,oBAAQR,WAAWQ;AAJY,SAAnC;AAMH;;AAEDxB,yBAAqB4B,MAArB,CAA4BZ,UAA5B,EAAwC;AACpCG,aADoC;AAEpCO,eAFoC;AAGpCD,qBAHoC;AAIpCD,gBAAQR,WAAWQ;AAJiB,KAAxC;AAMH,CA3DD","file":"../../../../processor/global-intents/power/upgradePowerCreep.js","sourceRoot":"/src"}